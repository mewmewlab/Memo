import{t as h,a as e,b as w,c as sa}from"../chunks/DPXIWFme.js";import"../chunks/DGQ5x3i9.js";import{a as U}from"../chunks/C_o3GfcV.js";import{z as k,s as oa,a as na,b as ia,c as la,d as da,e as V,C as Y,F as q,f as B,I as G,g as H,h as pa}from"../chunks/B3N6cA5j.js";import"../chunks/1GKXK2jR.js";import{_ as ma,a1 as ca,W as J,$ as g,a2 as m,a3 as A,K as $,Y as L}from"../chunks/DDkSnQK4.js";import{c as o,s as ua,a as N,b as Q,d as X,i as fa}from"../chunks/BKSucehH.js";import{p as va,C as _a}from"../chunks/DOU0EhgJ.js";const Z=k.object({email:k.string().email("Please enter a valid email"),password:k.string().min(2).max(50)}),ga=async()=>({form:await oa(na(Z))}),Da=Object.freeze(Object.defineProperty({__proto__:null,load:ga},Symbol.toStringTag,{value:"Module"}));var ha=h("<!> <!>",1),ba=h("<!> <!>",1),wa=h("<!> <!>",1),$a=h("<!> <!>",1),xa=h('<div class="flex align-center justify-center flex-col gap-4"><form method="POST"><!> <!> <!></form> <div class="text-xs text-gray-400 font-normal"><a href="/signup">Create an account!</a></div></div>');function ya(x,b){ma(b,!0);const[T,aa]=ua(),p=()=>X(P,"$formData",T),W=()=>X(ta,"$submitting",T),y=ia(b.data.form,{SPA:!0,validators:la(Z),onUpdate:async({form:t})=>{if(t.valid)try{await va.collection("users").authWithPassword(t.data.email,t.data.password),await U({type:"redirect",status:303,location:"/"})}catch(r){if(r instanceof _a)V(t,"email",""),V(t,"password","Email or password is incorrect"),await U({type:"failure",status:400,data:{response:r.response}});else throw r}}}),{form:P,enhance:F,submitting:ta}=y;var S=xa(),C=J(S),K=J(C);o(K,()=>H,(t,r)=>{r(t,{form:y,name:"email",children:(c,R)=>{var n=ba(),i=g(n);o(i,()=>Y,(s,a)=>{a(s,{children:(j,l)=>{let z=()=>l==null?void 0:l().props;var v=ha(),_=g(v);o(_,()=>B,(d,I)=>{I(d,{children:(D,ra)=>{A();var O=w("Email");e(D,O)},$$slots:{default:!0}})});var E=m(_,2);G(E,N(z,{get value(){return p().email},set value(d){Q(P,$(p).email=d,$(p))}})),e(j,v)},$$slots:{default:!0}})});var u=m(i,2);o(u,()=>q,(s,a)=>{a(s,{})}),e(c,n)},$$slots:{default:!0}})});var M=m(K,2);o(M,()=>H,(t,r)=>{r(t,{form:y,name:"password",children:(c,R)=>{var n=$a(),i=g(n);o(i,()=>Y,(s,a)=>{a(s,{children:(j,l)=>{let z=()=>l==null?void 0:l().props;var v=wa(),_=g(v);o(_,()=>B,(d,I)=>{I(d,{children:(D,ra)=>{A();var O=w("Password");e(D,O)},$$slots:{default:!0}})});var E=m(_,2);G(E,N(z,{type:"password",get value(){return p().password},set value(d){Q(P,$(p).password=d,$(p))}})),e(j,v)},$$slots:{default:!0}})});var u=m(i,2);o(u,()=>q,(s,a)=>{a(s,{})}),e(c,n)},$$slots:{default:!0}})});var ea=m(M,2);o(ea,()=>pa,(t,r)=>{r(t,{type:"submit",get disabled(){return W()},class:"top-10",children:(c,R)=>{var n=sa(),i=g(n);{var u=a=>{var f=w("Processing...");e(a,f)},s=a=>{var f=w("Sign In");e(a,f)};fa(i,a=>{W()?a(u):a(s,!1)})}e(c,n)},$$slots:{default:!0}})}),L(C),da(C,t=>F==null?void 0:F(t)),A(2),L(S),e(x,S),ca(),aa()}function Oa(x,b){ya(x,{get data(){return b.data}})}export{Oa as component,Da as universal};
