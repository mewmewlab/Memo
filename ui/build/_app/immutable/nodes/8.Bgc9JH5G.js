import{t as w,a as r,b as C,c as oa}from"../chunks/DPXIWFme.js";import"../chunks/DGQ5x3i9.js";import{a as L}from"../chunks/C_o3GfcV.js";import{z,s as na,a as la,b as da,c as ia,d as pa,e as ma,C as I,F as R,f as T,I as U,g as W,h as ca}from"../chunks/B3N6cA5j.js";import"../chunks/1GKXK2jR.js";import{_ as ua,a1 as _a,W as N,$ as f,a2 as m,a3 as A,K as g,Y as Q}from"../chunks/DDkSnQK4.js";import{c as s,s as va,a as K,b as M,d as X,i as fa}from"../chunks/BKSucehH.js";import{p as Z,C as wa}from"../chunks/DOU0EhgJ.js";const aa=z.object({email:z.string().email("Please enter a valid email"),password:z.string().min(2).max(50),password_r:z.string().min(2).max(50)}),ha=async()=>({form:await na(la(aa))}),ka=Object.freeze(Object.defineProperty({__proto__:null,load:ha},Symbol.toStringTag,{value:"Module"}));var ga=w("<!> <!>",1),ba=w("<!> <!>",1),$a=w("<!> <!>",1),Pa=w("<!> <!>",1),xa=w("<!> <!>",1),ya=w("<!> <!>",1),Sa=w('<div class="flex align-center justify-center flex-col gap-6"><form method="POST"><!> <!> <!> <!></form> <div class="text-xs text-gray-400 font-normal">Already have an account ? <a href="/signin">Signin!</a></div></div>');function Ia(ta,V){ua(V,!0);const[Y,ea]=va(),p=()=>X(j,"$formData",Y),q=()=>X(ra,"$submitting",Y),F=da(V.data.form,{SPA:!0,validators:ia(aa),onUpdate:async({form:a})=>{if(a.valid){if(a.data.password!==a.data.password_r){ma(a,"password_r","Password and repeate all not the same");return}try{await Z.collection("users").create({email:a.data.email,password:a.data.password,passwordConfirm:a.data.password_r}),await Z.collection("users").authWithPassword(a.data.email,a.data.password),await L({type:"redirect",status:303,location:"/"})}catch(o){if(o instanceof wa)await L({type:"failure",status:400,data:{response:o.response}});else throw o}}}}),{form:j,enhance:D,submitting:ra}=F;var E=Sa(),O=N(E),B=N(O);s(B,()=>W,(a,o)=>{o(a,{form:F,name:"email",children:(_,k)=>{var n=ba(),i=f(n);s(i,()=>I,(e,t)=>{t(e,{children:(b,l)=>{let $=()=>l==null?void 0:l().props;var c=ga(),u=f(c);s(u,()=>T,(d,x)=>{x(d,{children:(y,J)=>{A();var S=C("Email");r(y,S)},$$slots:{default:!0}})});var P=m(u,2);U(P,K($,{get value(){return p().email},set value(d){M(j,g(p).email=d,g(p))}})),r(b,c)},$$slots:{default:!0}})});var v=m(i,2);s(v,()=>R,(e,t)=>{t(e,{})}),r(_,n)},$$slots:{default:!0}})});var G=m(B,2);s(G,()=>W,(a,o)=>{o(a,{form:F,name:"password",children:(_,k)=>{var n=Pa(),i=f(n);s(i,()=>I,(e,t)=>{t(e,{children:(b,l)=>{let $=()=>l==null?void 0:l().props;var c=$a(),u=f(c);s(u,()=>T,(d,x)=>{x(d,{children:(y,J)=>{A();var S=C("Password");r(y,S)},$$slots:{default:!0}})});var P=m(u,2);U(P,K($,{type:"password",get value(){return p().password},set value(d){M(j,g(p).password=d,g(p))}})),r(b,c)},$$slots:{default:!0}})});var v=m(i,2);s(v,()=>R,(e,t)=>{t(e,{})}),r(_,n)},$$slots:{default:!0}})});var H=m(G,2);s(H,()=>W,(a,o)=>{o(a,{form:F,name:"password_r",children:(_,k)=>{var n=ya(),i=f(n);s(i,()=>I,(e,t)=>{t(e,{children:(b,l)=>{let $=()=>l==null?void 0:l().props;var c=xa(),u=f(c);s(u,()=>T,(d,x)=>{x(d,{children:(y,J)=>{A();var S=C("Password Repeat");r(y,S)},$$slots:{default:!0}})});var P=m(u,2);U(P,K($,{type:"password",get value(){return p().password_r},set value(d){M(j,g(p).password_r=d,g(p))}})),r(b,c)},$$slots:{default:!0}})});var v=m(i,2);s(v,()=>R,(e,t)=>{t(e,{})}),r(_,n)},$$slots:{default:!0}})});var sa=m(H,2);s(sa,()=>ca,(a,o)=>{o(a,{type:"submit",get disabled(){return q()},children:(_,k)=>{var n=oa(),i=f(n);{var v=t=>{var h=C("Processing...");r(t,h)},e=t=>{var h=C("Sign Up");r(t,h)};fa(i,t=>{q()?t(v):t(e,!1)})}r(_,n)},$$slots:{default:!0}})}),Q(O),pa(O,a=>D==null?void 0:D(a)),A(2),Q(E),r(ta,E),_a(),ea()}export{Ia as component,ka as universal};
